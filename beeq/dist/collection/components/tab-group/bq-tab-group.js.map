{"version":3,"file":"bq-tab-group.js","sourceRoot":"","sources":["../../../../../../src/components/tab-group/bq-tab-group.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Element, Event, EventEmitter, h, Host, Listen, Prop, Watch } from '@stencil/core';\n\nimport { debounce, getNextElement, isHTMLElement, isNil, TDebounce, validatePropValue } from '../../shared/utils';\nimport {\n  TAB_ORIENTATION,\n  TAB_PLACEMENT,\n  TAB_SIZE,\n  TTabOrientation,\n  TTabPlacement,\n  TTabSize,\n} from '../tab/bq-tab.types';\n\n/**\n * The tab group is a user interface element that allows users wrap a set of tab items.\n *\n * @example How to use it\n * ```html\n * <bq-tab-group value=\"5\">\n *   <bq-tab tab-id=\"1\">Tab</bq-tab>\n *   <bq-tab tab-id=\"2\" active>Tab</bq-tab>\n *   <bq-tab tab-id=\"3\">Long Tab name</bq-tab>\n *   <bq-tab tab-id=\"4\" disabled>Tab</bq-tab>\n * </bq-tab-group>\n * ```\n *\n * @documentation https://www.beeq.design/3d466e231/p/775321-tabs\n * @status stable\n *\n * @attr {number} debounce-time - A number representing the delay value applied to bqChange event handler\n * @attr {boolean} disable-divider - If true, the underline divider below the tabs won't be shown\n * @attr {string} orientation - The direction that tab should be render\n * @attr {string} placement - The placement that tab should be render\n * @attr {string} size - The size of the tab\n * @attr {string} value - A string representing the id of the selected tab.\n *\n * @event bqChange - Handler to be called when the tab value changes\n *\n * @slot - The bq-tab items\n *\n * @part base - The HTML div wrapper inside the shadow DOM.\n * @part tabs - The HTML div used to hold the tab buttons.\n */\n@Component({\n  tag: 'bq-tab-group',\n  styleUrl: './scss/bq-tab-group.scss',\n  shadow: true,\n})\nexport class BqTabGroup {\n  // Own Properties\n  // ====================\n\n  private debouncedBqChange: TDebounce<{ value: string; target: HTMLBqTabElement }>;\n\n  // Reference to host HTML element\n  // ===================================\n\n  @Element() el!: HTMLBqTabGroupElement;\n\n  // State() variables\n  // Inlined decorator, alphabetical order\n  // =======================================\n\n  // Public Property API\n  // ========================\n\n  /** A number representing the delay value applied to bqChange event handler */\n  @Prop({ reflect: true, mutable: true }) debounceTime = 0;\n\n  /** If true, the underline divider below the tabs won't be shown  */\n  @Prop({ reflect: true }) disableDivider = false;\n\n  /** The direction that tab should be render */\n  @Prop({ reflect: true }) orientation?: TTabOrientation = 'horizontal';\n\n  /** The placement that tab should be render */\n  @Prop({ reflect: true }) placement?: TTabPlacement = 'start';\n\n  /** The size of the tab */\n  @Prop({ reflect: true }) size: TTabSize = 'medium';\n\n  /** A string representing the id of the selected tab. */\n  @Prop({ reflect: true, mutable: true }) value: string;\n\n  // Prop lifecycle events\n  // =======================\n\n  @Watch('debounceTime')\n  checkDebounceChange() {\n    if (this.debounceTime < 0) {\n      this.debounceTime = Math.max(0, this.debounceTime);\n    }\n\n    if (this.debouncedBqChange) {\n      this.debouncedBqChange.cancel();\n    }\n\n    this.debouncedBqChange = debounce((event: Parameters<typeof this.debouncedBqChange>[0]) => {\n      this.bqChange.emit(event);\n    }, this.debounceTime);\n  }\n\n  @Watch('size')\n  @Watch('value')\n  @Watch('orientation')\n  @Watch('placement')\n  checkPropValues() {\n    validatePropValue(TAB_SIZE, 'medium', this.el, 'size');\n    validatePropValue(TAB_ORIENTATION, 'horizontal', this.el, 'orientation');\n    validatePropValue(TAB_PLACEMENT, 'start', this.el, 'placement');\n\n    this.bqTabElements.forEach((bqTabElement) => {\n      bqTabElement.size = this.size;\n      bqTabElement.orientation = this.orientation;\n      bqTabElement.placement = this.placement;\n      bqTabElement.active = !isNil(this.value) ? bqTabElement.tabId === this.value : false;\n    });\n  }\n\n  // Events section\n  // Requires JSDocs for public API documentation\n  // ==============================================\n\n  /** Handler to be called when the tab value changes */\n  @Event() bqChange: EventEmitter<{ target: HTMLBqTabElement; value: string }>;\n\n  // Component lifecycle events\n  // Ordered by their natural call order\n  // =====================================\n\n  componentWillLoad() {\n    this.checkDebounceChange();\n    this.checkPropValues();\n  }\n\n  componentDidLoad() {\n    this.checkPropValues();\n  }\n\n  // Listeners\n  // ==============\n\n  @Listen('keyup', { target: 'body', passive: true, capture: true })\n  onKeyUp(event: KeyboardEvent) {\n    const { target } = event;\n    if (!isHTMLElement(target, 'bq-tab')) return;\n\n    this.makeTabsFocusable();\n  }\n\n  @Listen('bqClick', { passive: true })\n  onBqClick(event: CustomEvent<HTMLBqTabElement>) {\n    const { detail: target } = event;\n    this.bqTabElements.forEach((bqTabElement) => (bqTabElement.active = bqTabElement === target));\n    this.debouncedBqChange({ value: target.tabId, target });\n    this.selectTab(target);\n  }\n\n  @Listen('bqKeyDown', { passive: true })\n  async onBqKeyDown(event: CustomEvent<KeyboardEvent>) {\n    const { target } = event;\n\n    // NOTE: ensures the target is an HTML element with the tag name 'bq-tab'\n    if (!isHTMLElement(target, 'bq-tab')) return;\n\n    const keyActions: { [key: string]: 'forward' | 'backward' } = {\n      ArrowDown: 'forward',\n      ArrowRight: 'forward',\n      ArrowUp: 'backward',\n      ArrowLeft: 'backward',\n    };\n\n    // NOTE: gets the direction based on key pressed\n    const direction = keyActions[event.detail.key];\n\n    if (!direction) return;\n\n    await this.focusTabSibling(target, direction);\n  }\n\n  @Listen('bqBlur', { capture: true, passive: true })\n  onBqBlur() {\n    this.restoreTabsFocus();\n  }\n\n  // Public methods API\n  // These methods are exposed on the host element.\n  // Always use two lines.\n  // Public Methods must be async.\n  // Requires JSDocs for public API documentation.\n  // ===============================================\n\n  // Local methods\n  // Internal business logic.\n  // These methods cannot be called from the host element.\n  // =======================================================\n\n  private focusTabSibling = async (\n    currentTarget: HTMLBqTabElement,\n    direction: 'forward' | 'backward',\n  ): Promise<void> => {\n    let target: HTMLBqTabElement | null = null;\n\n    this.bqTabElements.forEach((bqTabElement, index, elements) => {\n      bqTabElement.active = false;\n\n      if (bqTabElement === currentTarget) {\n        target = getNextElement(elements, index, direction);\n      }\n    });\n\n    if (target) {\n      await target.vFocus();\n      this.selectTab(target);\n    }\n  };\n\n  private makeTabsFocusable = (): void => {\n    this.bqTabElements.forEach((bqTabElement) => {\n      if (bqTabElement.disabled) return;\n\n      /**\n       * This is a \"fire and forget\" operation. The callback itself doesn't do anything special\n       * with the asynchronous code (doesn't await it or do anything with the result)\n       * Details: https://stackoverflow.com/a/63488201\n       */\n      (async () => {\n        await bqTabElement.enableFocus(true);\n      })();\n    });\n  };\n\n  private restoreTabsFocus = (): void => {\n    this.bqTabElements.forEach((bqTabElement) => {\n      if (bqTabElement.disabled || bqTabElement.active) return;\n\n      /** @See line #173 */\n      (async () => {\n        await bqTabElement.enableFocus(false);\n      })();\n    });\n  };\n\n  private get bqTabElements(): HTMLBqTabElement[] {\n    return Array.from(this.el.querySelectorAll('bq-tab'));\n  }\n\n  private selectTab = (target: HTMLBqTabElement): void => {\n    const { tabId } = target;\n    target.active = true;\n    this.value = tabId;\n    this.debouncedBqChange({ value: tabId, target });\n  };\n\n  // render() function\n  // Always the last one in the class.\n  // ===================================\n\n  render() {\n    return (\n      <Host class={{ 'inline-block': this.orientation === 'vertical' }}>\n        <div\n          class={{\n            [`bq-tab-group bq-tab-group--${this.orientation}-${this.placement} flex is-full`]: true,\n            'no-divider': this.disableDivider,\n          }}\n          part=\"base\"\n        >\n          <div\n            class={{\n              'bq-tab-group--container flex overflow-x-auto': true,\n              'flex-col': this.orientation !== 'horizontal',\n            }}\n            role=\"tablist\"\n            part=\"tabs\"\n          >\n            <slot />\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}