{"version":3,"names":["bqTabGroupCss","BqTabGroupStyle0","BqTabGroup","debouncedBqChange","debounceTime","disableDivider","orientation","placement","size","value","checkDebounceChange","this","Math","max","cancel","debounce","event","bqChange","emit","checkPropValues","validatePropValue","TAB_SIZE","el","TAB_ORIENTATION","TAB_PLACEMENT","bqTabElements","forEach","bqTabElement","active","isNil","tabId","componentWillLoad","componentDidLoad","onKeyUp","target","isHTMLElement","makeTabsFocusable","onBqClick","detail","selectTab","onBqKeyDown","keyActions","ArrowDown","ArrowRight","ArrowUp","ArrowLeft","direction","key","focusTabSibling","onBqBlur","restoreTabsFocus","async","currentTarget","index","elements","getNextElement","vFocus","disabled","enableFocus","Array","from","querySelectorAll","render","h","Host","class","part","role"],"sources":["../../packages/beeq/src/components/tab-group/scss/bq-tab-group.scss?tag=bq-tab-group&encapsulation=shadow","../../packages/beeq/src/components/tab-group/bq-tab-group.tsx"],"sourcesContent":["/* -------------------------------------------------------------------------- */\n/*                                Tab styles                               */\n/* -------------------------------------------------------------------------- */\n\n:host {\n  @apply block;\n}\n\n.bq-tab-group {\n  @apply relative;\n\n  &::after {\n    @apply absolute flex border-0 border-solid border-primary content-empty;\n  }\n\n  &--horizontal-start,\n  &--horizontal-end {\n    &::after {\n      @apply is-full inset-be-0 [border-block-end-width:--bq-stroke-s];\n    }\n  }\n\n  &--horizontal-start {\n    @apply justify-start;\n  }\n\n  &--horizontal-end {\n    @apply justify-end;\n  }\n\n  &--vertical-start::after {\n    @apply end-0 bs-full is-0 [border-block-end-width:0px] [border-inline-end-width:--bq-stroke-s];\n  }\n\n  &--vertical-end::after {\n    @apply start-0 bs-full is-0 [border-block-end-width:0px] [border-inline-start-width:--bq-stroke-s];\n  }\n}\n\n.bq-tab-group.no-divider {\n  &::after {\n    @apply content-none;\n  }\n}\n\n.bq-tab-group--container {\n  @include hide-scrollbar;\n  @apply gap-xs2 p-xs2; // This will avoid cutting the outline focus style\n}\n","import { Component, Element, Event, EventEmitter, h, Host, Listen, Prop, Watch } from '@stencil/core';\n\nimport { debounce, getNextElement, isHTMLElement, isNil, TDebounce, validatePropValue } from '../../shared/utils';\nimport {\n  TAB_ORIENTATION,\n  TAB_PLACEMENT,\n  TAB_SIZE,\n  TTabOrientation,\n  TTabPlacement,\n  TTabSize,\n} from '../tab/bq-tab.types';\n\n/**\n * The tab group is a user interface element that allows users wrap a set of tab items.\n *\n * @example How to use it\n * ```html\n * <bq-tab-group value=\"5\">\n *   <bq-tab tab-id=\"1\">Tab</bq-tab>\n *   <bq-tab tab-id=\"2\" active>Tab</bq-tab>\n *   <bq-tab tab-id=\"3\">Long Tab name</bq-tab>\n *   <bq-tab tab-id=\"4\" disabled>Tab</bq-tab>\n * </bq-tab-group>\n * ```\n *\n * @documentation https://www.beeq.design/3d466e231/p/775321-tabs\n * @status stable\n *\n * @attr {number} debounce-time - A number representing the delay value applied to bqChange event handler\n * @attr {boolean} disable-divider - If true, the underline divider below the tabs won't be shown\n * @attr {string} orientation - The direction that tab should be render\n * @attr {string} placement - The placement that tab should be render\n * @attr {string} size - The size of the tab\n * @attr {string} value - A string representing the id of the selected tab.\n *\n * @event bqChange - Handler to be called when the tab value changes\n *\n * @slot - The bq-tab items\n *\n * @part base - The HTML div wrapper inside the shadow DOM.\n * @part tabs - The HTML div used to hold the tab buttons.\n */\n@Component({\n  tag: 'bq-tab-group',\n  styleUrl: './scss/bq-tab-group.scss',\n  shadow: true,\n})\nexport class BqTabGroup {\n  // Own Properties\n  // ====================\n\n  private debouncedBqChange: TDebounce<{ value: string; target: HTMLBqTabElement }>;\n\n  // Reference to host HTML element\n  // ===================================\n\n  @Element() el!: HTMLBqTabGroupElement;\n\n  // State() variables\n  // Inlined decorator, alphabetical order\n  // =======================================\n\n  // Public Property API\n  // ========================\n\n  /** A number representing the delay value applied to bqChange event handler */\n  @Prop({ reflect: true, mutable: true }) debounceTime = 0;\n\n  /** If true, the underline divider below the tabs won't be shown  */\n  @Prop({ reflect: true }) disableDivider = false;\n\n  /** The direction that tab should be render */\n  @Prop({ reflect: true }) orientation?: TTabOrientation = 'horizontal';\n\n  /** The placement that tab should be render */\n  @Prop({ reflect: true }) placement?: TTabPlacement = 'start';\n\n  /** The size of the tab */\n  @Prop({ reflect: true }) size: TTabSize = 'medium';\n\n  /** A string representing the id of the selected tab. */\n  @Prop({ reflect: true, mutable: true }) value: string;\n\n  // Prop lifecycle events\n  // =======================\n\n  @Watch('debounceTime')\n  checkDebounceChange() {\n    if (this.debounceTime < 0) {\n      this.debounceTime = Math.max(0, this.debounceTime);\n    }\n\n    if (this.debouncedBqChange) {\n      this.debouncedBqChange.cancel();\n    }\n\n    this.debouncedBqChange = debounce((event: Parameters<typeof this.debouncedBqChange>[0]) => {\n      this.bqChange.emit(event);\n    }, this.debounceTime);\n  }\n\n  @Watch('size')\n  @Watch('value')\n  @Watch('orientation')\n  @Watch('placement')\n  checkPropValues() {\n    validatePropValue(TAB_SIZE, 'medium', this.el, 'size');\n    validatePropValue(TAB_ORIENTATION, 'horizontal', this.el, 'orientation');\n    validatePropValue(TAB_PLACEMENT, 'start', this.el, 'placement');\n\n    this.bqTabElements.forEach((bqTabElement) => {\n      bqTabElement.size = this.size;\n      bqTabElement.orientation = this.orientation;\n      bqTabElement.placement = this.placement;\n      bqTabElement.active = !isNil(this.value) ? bqTabElement.tabId === this.value : false;\n    });\n  }\n\n  // Events section\n  // Requires JSDocs for public API documentation\n  // ==============================================\n\n  /** Handler to be called when the tab value changes */\n  @Event() bqChange: EventEmitter<{ target: HTMLBqTabElement; value: string }>;\n\n  // Component lifecycle events\n  // Ordered by their natural call order\n  // =====================================\n\n  componentWillLoad() {\n    this.checkDebounceChange();\n    this.checkPropValues();\n  }\n\n  componentDidLoad() {\n    this.checkPropValues();\n  }\n\n  // Listeners\n  // ==============\n\n  @Listen('keyup', { target: 'body', passive: true, capture: true })\n  onKeyUp(event: KeyboardEvent) {\n    const { target } = event;\n    if (!isHTMLElement(target, 'bq-tab')) return;\n\n    this.makeTabsFocusable();\n  }\n\n  @Listen('bqClick', { passive: true })\n  onBqClick(event: CustomEvent<HTMLBqTabElement>) {\n    const { detail: target } = event;\n    this.bqTabElements.forEach((bqTabElement) => (bqTabElement.active = bqTabElement === target));\n    this.debouncedBqChange({ value: target.tabId, target });\n    this.selectTab(target);\n  }\n\n  @Listen('bqKeyDown', { passive: true })\n  async onBqKeyDown(event: CustomEvent<KeyboardEvent>) {\n    const { target } = event;\n\n    // NOTE: ensures the target is an HTML element with the tag name 'bq-tab'\n    if (!isHTMLElement(target, 'bq-tab')) return;\n\n    const keyActions: { [key: string]: 'forward' | 'backward' } = {\n      ArrowDown: 'forward',\n      ArrowRight: 'forward',\n      ArrowUp: 'backward',\n      ArrowLeft: 'backward',\n    };\n\n    // NOTE: gets the direction based on key pressed\n    const direction = keyActions[event.detail.key];\n\n    if (!direction) return;\n\n    await this.focusTabSibling(target, direction);\n  }\n\n  @Listen('bqBlur', { capture: true, passive: true })\n  onBqBlur() {\n    this.restoreTabsFocus();\n  }\n\n  // Public methods API\n  // These methods are exposed on the host element.\n  // Always use two lines.\n  // Public Methods must be async.\n  // Requires JSDocs for public API documentation.\n  // ===============================================\n\n  // Local methods\n  // Internal business logic.\n  // These methods cannot be called from the host element.\n  // =======================================================\n\n  private focusTabSibling = async (\n    currentTarget: HTMLBqTabElement,\n    direction: 'forward' | 'backward',\n  ): Promise<void> => {\n    let target: HTMLBqTabElement | null = null;\n\n    this.bqTabElements.forEach((bqTabElement, index, elements) => {\n      bqTabElement.active = false;\n\n      if (bqTabElement === currentTarget) {\n        target = getNextElement(elements, index, direction);\n      }\n    });\n\n    if (target) {\n      await target.vFocus();\n      this.selectTab(target);\n    }\n  };\n\n  private makeTabsFocusable = (): void => {\n    this.bqTabElements.forEach((bqTabElement) => {\n      if (bqTabElement.disabled) return;\n\n      /**\n       * This is a \"fire and forget\" operation. The callback itself doesn't do anything special\n       * with the asynchronous code (doesn't await it or do anything with the result)\n       * Details: https://stackoverflow.com/a/63488201\n       */\n      (async () => {\n        await bqTabElement.enableFocus(true);\n      })();\n    });\n  };\n\n  private restoreTabsFocus = (): void => {\n    this.bqTabElements.forEach((bqTabElement) => {\n      if (bqTabElement.disabled || bqTabElement.active) return;\n\n      /** @See line #173 */\n      (async () => {\n        await bqTabElement.enableFocus(false);\n      })();\n    });\n  };\n\n  private get bqTabElements(): HTMLBqTabElement[] {\n    return Array.from(this.el.querySelectorAll('bq-tab'));\n  }\n\n  private selectTab = (target: HTMLBqTabElement): void => {\n    const { tabId } = target;\n    target.active = true;\n    this.value = tabId;\n    this.debouncedBqChange({ value: tabId, target });\n  };\n\n  // render() function\n  // Always the last one in the class.\n  // ===================================\n\n  render() {\n    return (\n      <Host class={{ 'inline-block': this.orientation === 'vertical' }}>\n        <div\n          class={{\n            [`bq-tab-group bq-tab-group--${this.orientation}-${this.placement} flex is-full`]: true,\n            'no-divider': this.disableDivider,\n          }}\n          part=\"base\"\n        >\n          <div\n            class={{\n              'bq-tab-group--container flex overflow-x-auto': true,\n              'flex-col': this.orientation !== 'horizontal',\n            }}\n            role=\"tablist\"\n            part=\"tabs\"\n          >\n            <slot />\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"],"mappings":";;;;iSAAA,MAAMA,EAAgB,oh8BACtB,MAAAC,EAAeD,E,MC8CFE,EAAU,M,4DAIbC,kB,wBAegCC,aAAe,EAG9BC,eAAiB,MAGjBC,YAAgC,aAGhCC,UAA4B,QAG5BC,KAAiB,SAGFC,MAMxC,mBAAAC,GACE,GAAIC,KAAKP,aAAe,EAAG,CACzBO,KAAKP,aAAeQ,KAAKC,IAAI,EAAGF,KAAKP,a,CAGvC,GAAIO,KAAKR,kBAAmB,CAC1BQ,KAAKR,kBAAkBW,Q,CAGzBH,KAAKR,kBAAoBY,GAAUC,IACjCL,KAAKM,SAASC,KAAKF,EAAM,GACxBL,KAAKP,a,CAOV,eAAAe,GACEC,EAAkBC,EAAU,SAAUV,KAAKW,GAAI,QAC/CF,EAAkBG,EAAiB,aAAcZ,KAAKW,GAAI,eAC1DF,EAAkBI,EAAe,QAASb,KAAKW,GAAI,aAEnDX,KAAKc,cAAcC,SAASC,IAC1BA,EAAanB,KAAOG,KAAKH,KACzBmB,EAAarB,YAAcK,KAAKL,YAChCqB,EAAapB,UAAYI,KAAKJ,UAC9BoB,EAAaC,QAAUC,EAAMlB,KAAKF,OAASkB,EAAaG,QAAUnB,KAAKF,MAAQ,KAAK,G,CAS/EQ,SAMT,iBAAAc,GACEpB,KAAKD,sBACLC,KAAKQ,iB,CAGP,gBAAAa,GACErB,KAAKQ,iB,CAOP,OAAAc,CAAQjB,GACN,MAAMkB,OAAEA,GAAWlB,EACnB,IAAKmB,EAAcD,EAAQ,UAAW,OAEtCvB,KAAKyB,mB,CAIP,SAAAC,CAAUrB,GACR,MAAQsB,OAAQJ,GAAWlB,EAC3BL,KAAKc,cAAcC,SAASC,GAAkBA,EAAaC,OAASD,IAAiBO,IACrFvB,KAAKR,kBAAkB,CAAEM,MAAOyB,EAAOJ,MAAOI,WAC9CvB,KAAK4B,UAAUL,E,CAIjB,iBAAMM,CAAYxB,GAChB,MAAMkB,OAAEA,GAAWlB,EAGnB,IAAKmB,EAAcD,EAAQ,UAAW,OAEtC,MAAMO,EAAwD,CAC5DC,UAAW,UACXC,WAAY,UACZC,QAAS,WACTC,UAAW,YAIb,MAAMC,EAAYL,EAAWzB,EAAMsB,OAAOS,KAE1C,IAAKD,EAAW,aAEVnC,KAAKqC,gBAAgBd,EAAQY,E,CAIrC,QAAAG,GACEtC,KAAKuC,kB,CAeCF,gBAAkBG,MACxBC,EACAN,KAEA,IAAIZ,EAAkC,KAEtCvB,KAAKc,cAAcC,SAAQ,CAACC,EAAc0B,EAAOC,KAC/C3B,EAAaC,OAAS,MAEtB,GAAID,IAAiByB,EAAe,CAClClB,EAASqB,EAAeD,EAAUD,EAAOP,E,KAI7C,GAAIZ,EAAQ,OACJA,EAAOsB,SACb7C,KAAK4B,UAAUL,E,GAIXE,kBAAoB,KAC1BzB,KAAKc,cAAcC,SAASC,IAC1B,GAAIA,EAAa8B,SAAU,OAO3B,iBACQ9B,EAAa+B,YAAY,KAChC,EAFD,EAEI,GACJ,EAGIR,iBAAmB,KACzBvC,KAAKc,cAAcC,SAASC,IAC1B,GAAIA,EAAa8B,UAAY9B,EAAaC,OAAQ,OAGlD,iBACQD,EAAa+B,YAAY,MAChC,EAFD,EAEI,GACJ,EAGJ,iBAAYjC,GACV,OAAOkC,MAAMC,KAAKjD,KAAKW,GAAGuC,iBAAiB,U,CAGrCtB,UAAaL,IACnB,MAAMJ,MAAEA,GAAUI,EAClBA,EAAON,OAAS,KAChBjB,KAAKF,MAAQqB,EACbnB,KAAKR,kBAAkB,CAAEM,MAAOqB,EAAOI,UAAS,EAOlD,MAAA4B,GACE,OACEC,EAACC,EAAI,CAAAjB,IAAA,2CAACkB,MAAO,CAAE,eAAgBtD,KAAKL,cAAgB,aAClDyD,EAAA,OAAAhB,IAAA,2CACEkB,MAAO,CACL,CAAC,8BAA8BtD,KAAKL,eAAeK,KAAKJ,0BAA2B,KACnF,aAAcI,KAAKN,gBAErB6D,KAAK,QAELH,EAAA,OAAAhB,IAAA,2CACEkB,MAAO,CACL,+CAAgD,KAChD,WAAYtD,KAAKL,cAAgB,cAEnC6D,KAAK,UACLD,KAAK,QAELH,EAAA,QAAAhB,IAAA,+C","ignoreList":[]}